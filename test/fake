#!/usr/bin/env make -f
where-am-i = $(CURDIR)/$(word $(words $(MAKEFILE_LIST)),$(MAKEFILE_LIST))
HERE := $(call where-am-i)
FAKE=make -f $(HERE)

shell=bash
PATH:=$(PATH):$(PWD)

.PHONY: all
all:
	@$(foreach f,$(shell ls *.gold),  ../gold $f make;)

nb1 :;@ cat ../data/weathered.csv | nb.gold

lsh1 :;@ cat ../data/weathered.csv | lsh.gold
lsh2 :;@ cat ../data/poi3-0.csv | lsh.gold \
         | gawk -F, '{m[$$NF]++; d[$$NF]+= $$24>0} END{for(i in m) print m[i],d[i]/m[i]}' \
         | sort -n

dbScan1:  
	@cat ../data/poi3-0.csv | lsh.gold | dbscan.gold
